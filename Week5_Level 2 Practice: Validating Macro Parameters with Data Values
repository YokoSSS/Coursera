Level 2 Practice: Validating Macro Parameters with Data Values


1.Reminder: If you restarted your SAS session, you must submit the libname.sas program in the EMC1V2 folder. 
1.注意事項 SASセッションを再起動した場合は、EMC1V2フォルダのlibname.sasを提出する必要があります。

Open m105p05.sas from the practices folder. Review and submit the program.
practices フォルダにある m105p05.sas を開いてください。プログラムを確認し、提出する。

Use PROC SQL to create the macro variables MinSeason and MaxSeason that store the minimum and 
maximum values of the Season column in the mc1.storm_final table. 
PROC SQL を使用して、mc1.storm_final テーブルの Season カラムの最小値と最大値を格納するマクロ変数 MinSeason と 
MaxSeason を作成します。

Add a condition to verify that the Season parameter is between MinSeason and MaxSeason. 
If the Season parameter is outside of the valid range, write this message to the log:  
ERROR: Valid Seasons are between <minSeason> and <maxSeason>  
Season パラメータが MinSeason と MaxSeason の間にあるかどうかを確認する条件を追加します。
Seasonパラメータが有効範囲外の場合、以下のメッセージをログに記録します。 
ERROR: 有効なSeasonは<minSeason>と<maxSeason>の間です。 


If the Season parameter is valid, use PROC SQL to create a space-delimited list of valid Basin 
codes from the mc1.storm_basin_codes table. Load the list into a macro variable.
Seasonパラメータが有効な場合、PROC SQLを使用して、mc1.storm_basin_codesテーブルから有効なBasinコードの
スペース区切りのリストを作成します。このリストをマクロ変数にロードする。

If the Basin parameter is in the list of valid codes, execute the TITLE statements and the 
PROC SGPLOT step. Note: Be sure to use the MINOPERATOR option in the %MACRO statement to 
enable the macro IN operator.
Basinパラメータが有効なコードのリストに含まれている場合、TITLEステートメントとPROC SGPLOTステップを実行します。
メモ: マクロの IN 演算子を有効にするには、%MACRO 文で MINOPERATOR オプションを必ず使用してください。

If the Basin parameter is not in the list of valid codes, write this message to the log: 
ERROR: AA is an invalid basin code. Basin codes include NA WP EP SP NI SI.  
Basin パラメータが有効なコードのリストにない場合は、このメッセージをログに記録してください。 
ERROR: AA is an invalid basin code. Basinコードには、NA WP EP SP NI SIがあります。 


Test the macro with valid and invalid values for both Basin and Season.
BasinとSeasonの両方に有効な値と無効な値を指定して、マクロをテストしてください。

How many tropical storms were there in the EP basin in 2010?
2010年にEP流域で発生した熱帯低気圧は何個か？

Note: Type a numeric value for your answer.
注：回答には数値を入力してください。

My answer: 2
https://github.com/YokoSSS/Coursera/issues/104#issue-1423047831

/*
%macro stormchart(basin, season) / minoperator;
proc sql noprint;
select min(season), max(season)
    into :minseason trimmed, :maxseason trimmed
    from mc1.storm_final;
quit;

%if &season<&minseason or &season>&maxseason %then %do;
    %put ERROR: Valid Seasons are between 1980 and 2017;
%end;

%else %do;
    proc sql noprint;
    select Basin
        into :basinlist separated by " "
        from mc1.storm_basin_codes;
    quit;
    %if &basin in &basinlist %then %do;
        title1 "Storm Frequency by Type";
        title2 "&basin, &season";
        proc sgplot data=mc1.storm_final noborder;
            vbar StormType / filltype=gradient;
            where Basin="&Basin" and Season=&Season;
            yaxis grid;
        run;
        title;
    %end;
    %else %do;
        %put ERROR: &basin is an invalid basin code. Basin codes include &basinlist..;
    %end;
%end;
%mend stormchart;

%stormchart(NA,2020)
%stormchart(EP,2010)
%stormchart(AA,2010)

*/
